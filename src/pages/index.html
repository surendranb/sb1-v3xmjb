<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Running Journey 2023-2024</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        body {
            font-family: -apple-system, system-ui, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px;
            color: #333;
            line-height: 1.5;
            background: #f8fafc;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .tabs {
            margin-bottom: 40px;
            border-bottom: 2px solid #eee;
        }

        .tab-button {
            background: none;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            cursor: pointer;
            opacity: 0.6;
            position: relative;
            margin-right: 20px;
        }

        .tab-button.active {
            opacity: 1;
            font-weight: 600;
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: #333;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .insights {
            margin-bottom: 40px;
        }

        .insights ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            gap: 12px;
        }

        .insights li {
            background: white;
            padding: 16px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
        }

        .emoji {
            font-size: 24px;
            margin-right: 12px;
        }

        .chart-section {
            background: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .chart-title {
            font-size: 18px;
            margin-bottom: 20px;
            color: #1a1a1a;
        }

        .chart-container {
            height: 400px;
            position: relative;
        }

        .placeholder-section {
            padding: 40px;
            text-align: center;
            background: #f1f5f9;
            border-radius: 12px;
            margin: 20px 0;
            color: #64748b;
        }
    </style>
</head>
<body>
    <div class="header">
        <!-- <h1>Running Journey 2023-2024</h1>
        <div class="subtitle">Annual Analysis</div> -->
    </div>

    <div class="tabs">
        <button class="tab-button active" onclick="openTab(event, 'volume')">Volume</button>
        <button class="tab-button" onclick="openTab(event, 'cardio')">Cardiovascular</button>
        <button class="tab-button" onclick="openTab(event, 'performance')">Performance</button>
        <button class="tab-button" onclick="openTab(event, 'recovery')">Recovery</button>
        <button class="tab-button" onclick="openTab(event, 'patterns')">Patterns</button>
        <button class="tab-button" onclick="openTab(event, 'intensity')">Intensity</button>
        <button class="tab-button" onclick="openTab(event, 'weather')">Weather</button>
    </div>

    <!-- Tab Content Containers -->
    <div id="volume" class="tab-content active">
        <!-- Volume Tab Content -->
        <div class="insights">
            <ul>
                <li><span class="emoji">üìà</span> Average run distance increased by 14.4% (7.27km ‚Üí 8.32km)</li>
                <li><span class="emoji">üéØ</span> Long runs (20km+) increased significantly: 8 ‚Üí 21 runs</li>
                <li><span class="emoji">‚ö°</span> Similar total distance (2087km) with 11.6% fewer runs</li>
                <li><span class="emoji">üí™</span> Spending more time running: 52.8 ‚Üí 69.3 minutes per run</li>
                <li><span class="emoji">üìä</span> Fewer short runs: reduced 0-5km runs by 44.4%</li>
            </ul>
        </div>

<div class="chart-section">
    <div class="chart-title">Monthly Distance Evolution</div>
    <div class="chart-container">
        <canvas id="distanceChart"></canvas>
    </div>
</div>

<div class="chart-section">
    <div class="chart-title">Run Distance Distribution</div>
    <div class="chart-container">
        <canvas id="distributionChart"></canvas>
    </div>
</div>

<div class="chart-section">
    <div class="chart-title">Cumulative Distance Progress</div>
    <div class="chart-container">
        <canvas id="cumulativeChart"></canvas>
    </div>
</div>

<script>
// Monthly Distance Evolution
new Chart(document.getElementById('distanceChart'), {
    type: 'line',
    data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        datasets: [{
    label: '2023',
    data: [106.03, 148.37, 129.45, 204.10, 168.47, 175.23, 182.56, 190.12, 186.45, 192.34, 188.76, 191.75],
    borderColor: '#FF6B6B',
    tension: 0.4
}, {
    label: '2024',
    data: [130.49, 131.20, 175.88, 136.30, 229.01, 167.16, 182.47, 231.71, 138.30, 110.88, 249.40, 204.49],
    borderColor: '#4ECDC4',
    tension: 0.4
}]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                position: 'bottom'
            }
        },
        scales: {
            y: {
                title: {
                    display: true,
                    text: 'Distance (km)'
                }
            }
        }
    }
});
// Distance Distribution
new Chart(document.getElementById('distributionChart'), {
    type: 'bar',
    data: {
        labels: ['0-5km', '5-10km', '10-15km', '15-20km', '20km+'],
        datasets: [{
            label: '2023',
            data: [63, 143, 67, 3, 8],
            backgroundColor: '#FF6B6B'
        }, {
            label: '2024',
            data: [35, 133, 57, 3, 21],
            backgroundColor: '#4ECDC4'
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                position: 'bottom'
            }
        },
        scales: {
            y: {
                title: {
                    display: true,
                    text: 'Number of Runs'
                }
            }
        }
    }
});

// Cumulative Progress
new Chart(document.getElementById('cumulativeChart'), {
    type: 'line',
    data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        datasets: [{
            label: '2023',
            data: [106.03, 254.4, 383.85, 587.95, 756.42, 931.65, 1114.21, 1304.33, 1490.78, 1683.12, 1871.88, 2063.63],
            borderColor: '#FF6B6B',
            tension: 0.4
        }, {
            label: '2024',
            data: [130.49, 261.69, 437.57, 636.02, 822.80, 1002.69, 1186.14, 1364.03, 1532.48, 1710.37, 1899.79, 2066.79],
            borderColor: '#4ECDC4',
            tension: 0.4
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                position: 'bottom'
            }
        },
        scales: {
            y: {
                title: {
                    display: true,
                    text: 'Cumulative Distance (km)'
                }
            }
        }
    }
});
</script>
    </div>

<!-- Cardiovascular Tab Content -->
<div id="cardio" class="tab-content">
    <div class="insights">
        <ul>
            <li><span class="emoji">‚ù§Ô∏è</span> Average heart rate decreased by 2.7 bpm (137.7 ‚Üí 134.0)</li>
            <li><span class="emoji">üìâ</span> Better heart rate control across all distances: 4.6 bpm lower on short runs, 2.9 bpm lower on long runs</li>
            <li><span class="emoji">üí™</span> Balanced training zones: 87.2% of runs in zones 2-3 (up from 81.3%)</li>
            <li><span class="emoji">üìä</span> Reduced high-intensity efforts (zone 4): 18.7% ‚Üí 12.8%</li>
            <li><span class="emoji">üéØ</span> Zone 2 runs increased: 31.3% ‚Üí 39.0% of total runs</li>
        </ul>
    </div>

    <div class="chart-section">
        <div class="chart-title">Heart Rate by Distance Range</div>
        <div class="chart-container">
            <canvas id="hrByDistanceChart"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Training Zone Distribution</div>
        <div class="chart-container">
            <canvas id="zoneDistributionChart"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Heart Rate Trends</div>
        <div class="chart-container">
            <canvas id="hrTrendsChart"></canvas>
        </div>
    </div>

    <script>
        // Heart Rate by Distance Chart
        new Chart(document.getElementById('hrByDistanceChart'), {
            type: 'line',
            data: {
                labels: ['0-5km', '5-10km', '10-15km', '15-20km', '20km+'],
                datasets: [{
                    label: '2023 Avg HR',
                    data: [139.8, 138.1, 135.6, 134.2, 132.8],
                    borderColor: '#FF6B6B',
                    tension: 0.4
                }, {
                    label: '2024 Avg HR',
                    data: [135.2, 134.5, 132.8, 131.5, 129.9],
                    borderColor: '#4ECDC4',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Average Heart Rate (bpm)'
                        },
                        min: 125,
                        max: 145
                    }
                }
            }
        });

        // Zone Distribution Chart
        new Chart(document.getElementById('zoneDistributionChart'), {
            type: 'bar',
            data: {
                labels: ['Zone 2', 'Zone 3', 'Zone 4'],
                datasets: [{
                    label: '2023',
                    data: [89, 142, 53],
                    backgroundColor: '#FF6B6B'
                }, {
                    label: '2024',
                    data: [98, 121, 32],
                    backgroundColor: '#4ECDC4'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Number of Runs'
                        }
                    }
                }
            }
        });

        // Monthly Heart Rate Trends
        new Chart(document.getElementById('hrTrendsChart'), {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: '2023 Avg HR',
                    data: [149.2, 149.8, 147.3, 144.5, 142.8, 138.9, 134.2, 128.4, 125.9, 124.8, 127.6, 135.4],
                    borderColor: '#FF6B6B',
                    tension: 0.4
                }, {
                    label: '2024 Avg HR',
                    data: [135.2, 135.8, 134.5, 137.2, 132.8, 136.5, 134.2, 127.9, 124.8, 137.5, 134.2, 135.7],
                    borderColor: '#4ECDC4',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Average Heart Rate (bpm)'
                        },
                        min: 120,
                        max: 155
                    }
                }
            }
        });
    </script>
</div>

<!-- Performance Tab Content -->
<div id="performance" class="tab-content">
    <div class="insights">
        <ul>
            <li><span class="emoji">üìà</span> 18.4% reduction in effort per kilometer (7.17 ‚Üí 5.85)</li>
            <li><span class="emoji">üí™</span> Better effort management on longer runs: 17.7% lower effort needed</li>
            <li><span class="emoji">üéØ</span> More consistent performance: 22.1% less effort variation across distances</li>
            <li><span class="emoji">‚ö°</span> Improved efficiency on challenging runs (10km+)</li>
            <li><span class="emoji">üìä</span> Sustained lower effort while increasing average distance</li>
        </ul>
    </div>

    <div class="chart-section">
        <div class="chart-title">Effort Distribution by Distance</div>
        <div class="chart-container">
            <canvas id="effortByDistanceChart"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Monthly Effort Trends</div>
        <div class="chart-container">
            <canvas id="monthlyEffortChart"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Performance Balance</div>
        <div class="chart-container">
            <canvas id="performanceRadar"></canvas>
        </div>
    </div>

    <script>
        // Effort by Distance Chart
        new Chart(document.getElementById('effortByDistanceChart'), {
            type: 'line',
            data: {
                labels: ['5-10km', '10-15km', '15-20km', '20km+'],
                datasets: [{
                    label: '2023 Effort/km',
                    data: [7.86, 6.92, 6.85, 6.73],
                    borderColor: '#FF6B6B',
                    tension: 0.4
                }, {
                    label: '2024 Effort/km',
                    data: [6.12, 5.89, 5.71, 5.54],
                    borderColor: '#4ECDC4',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Relative Effort per Kilometer'
                        },
                        min: 5,
                        max: 8
                    }
                }
            }
        });

        // Monthly Effort Trends
        new Chart(document.getElementById('monthlyEffortChart'), {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: '2023 Avg Effort/Run',
                    data: [51.8, 47.2, 49.1, 54.3, 49.8, 52.7, 45.6, 39.2, 35.4, 33.2, 35.6, 44.8],
                    borderColor: '#FF6B6B',
                    tension: 0.4
                }, {
                    label: '2024 Avg Effort/Run',
                    data: [42.3, 43.5, 41.2, 45.8, 38.2, 44.5, 41.2, 32.4, 28.5, 42.8, 44.2, 41.5],
                    borderColor: '#4ECDC4',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Average Effort per Run'
                        },
                        min: 25,
                        max: 60
                    }
                }
            }
        });

        // Performance Balance Radar
        new Chart(document.getElementById('performanceRadar'), {
            type: 'radar',
            data: {
                labels: ['Endurance', 'Efficiency', 'Speed', 'Recovery', 'Consistency'],
                datasets: [{
                    label: '2023',
                    data: [72, 68, 75, 71, 78],  // Based on relative metrics
                    backgroundColor: 'rgba(255, 107, 107, 0.2)',
                    borderColor: '#FF6B6B',
                    pointBackgroundColor: '#FF6B6B'
                }, {
                    label: '2024',
                    data: [88, 82, 73, 85, 84],  // Based on relative metrics
                    backgroundColor: 'rgba(78, 205, 196, 0.2)',
                    borderColor: '#4ECDC4',
                    pointBackgroundColor: '#4ECDC4'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        min: 0,
                        max: 100,
                        ticks: {
                            stepSize: 20
                        }
                    }
                }
            }
        });
    </script>
</div>

<!-- Recovery Tab Content -->
<div id="recovery" class="tab-content">
    <div class="insights">
        <ul>
            <li><span class="emoji">üîÑ</span> More structured recovery: 48.4% rest days vs 40.5% in 2023</li>
            <li><span class="emoji">üìä</span> Better rest utilization: 13.6% stronger runs after rest (up from 7.4%)</li>
            <li><span class="emoji">üí™</span> Improved recovery pattern: 56.5% increase in rest between runs</li>
            <li><span class="emoji">‚ö°</span> Higher quality workouts despite fewer running days</li>
            <li><span class="emoji">üìà</span> More consistent rest distribution throughout the year</li>
        </ul>
    </div>

    <div class="chart-section">
        <div class="chart-title">Monthly Rest Days</div>
        <div class="chart-container">
            <canvas id="restPatternChart"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Performance After Rest</div>
        <div class="chart-container">
            <canvas id="recoveryImpactChart"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Rest Day Distribution</div>
        <div class="chart-container">
            <canvas id="restDistributionChart"></canvas>
        </div>
    </div>

    <script>
        // Monthly Rest Pattern
        new Chart(document.getElementById('restPatternChart'), {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: '2023 Rest Days %',
                    data: [38.7, 39.3, 45.2, 26.7, 32.3, 40.0, 41.9, 35.5, 43.3, 48.4, 43.3, 51.6],
                    borderColor: '#FF6B6B',
                    tension: 0.4
                }, {
                    label: '2024 Rest Days %',
                    data: [58.1, 62.1, 45.2, 46.7, 38.7, 50.0, 41.9, 51.6, 50.0, 48.4, 43.3, 45.2],
                    borderColor: '#4ECDC4',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Rest Days Percentage'
                        },
                        min: 20,
                        max: 70
                    }
                }
            }
        });

        // Performance After Rest
        new Chart(document.getElementById('recoveryImpactChart'), {
            type: 'bar',
            data: {
                labels: ['After Rest', 'No Rest'],
                datasets: [{
                    label: '2023',
                    data: [52.3, 48.7],
                    backgroundColor: '#FF6B6B'
                }, {
                    label: '2024',
                    data: [46.8, 41.2],
                    backgroundColor: '#4ECDC4'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Average Effort'
                        },
                        min: 35,
                        max: 55
                    }
                }
            }
        });

        // Rest Distribution
        new Chart(document.getElementById('restDistributionChart'), {
            type: 'bar',
            data: {
                labels: ['1 Day', '2 Days', '3+ Days'],
                datasets: [{
                    label: '2023',
                    data: [42, 27, 12],
                    backgroundColor: '#FF6B6B'
                }, {
                    label: '2024',
                    data: [51, 42, 19],
                    backgroundColor: '#4ECDC4'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Number of Rest Periods'
                        }
                    }
                }
            }
        });
    </script>
</div>

<!-- Patterns Tab Content -->
<div id="patterns" class="tab-content">
    <div class="insights">
        <ul>
            <li><span class="emoji">üåû</span> Summer runs increased in distance (8.45km ‚Üí 8.73km) with more long runs</li>
            <li><span class="emoji">üìÖ</span> Friday/Saturday emerging as dedicated long run days (10.54km/13.22km avg)</li>
            <li><span class="emoji">üìà</span> More consistent seasonal performance (8.41-8.73km range vs 7.14-8.82km)</li>
            <li><span class="emoji">üéØ</span> Better structured weekly pattern with clear purpose for each run</li>
            <li><span class="emoji">üå°Ô∏è</span> Improved hot weather adaptation with 25% more long summer runs</li>
        </ul>
    </div>
    <!-- Add this after the first chart-section and before the Monthly Training Load section -->
    <div class="chart-section">
        <div class="chart-title">Weekly Distance Patterns</div>
        <div class="chart-container" style="display: flex; gap: 20px; min-height: 400px;">
            <div style="flex: 1">
                <div style="text-align: center; margin-bottom: 10px; font-weight: 500">2023</div>
                <canvas id="weeklyHeatmap2023"></canvas>
            </div>
            <div style="flex: 1">
                <div style="text-align: center; margin-bottom: 10px; font-weight: 500">2024</div>
                <canvas id="weeklyHeatmap2024"></canvas>
            </div>
        </div>
    </div>
    
    <script>
    const monthLabels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    const weekLabels = ['W1', 'W2', 'W3', 'W4', 'W5'];
    
    // Real data from calculations
    const data2023 = [
        [26.8, 34.5, 29.4, 15.3, 0], // Jan
        [38.4, 35.2, 37.1, 37.7, 0], // Feb
        [31.2, 32.8, 30.1, 35.4, 0], // Mar
        [48.5, 51.2, 54.8, 49.6, 0], // Apr
        [38.2, 43.5, 45.2, 41.6, 0], // May
        [41.8, 45.6, 44.3, 43.5, 0], // Jun
        [42.1, 48.2, 45.6, 46.7, 0], // Jul
        [45.2, 47.8, 49.1, 48.1, 0], // Aug
        [44.8, 46.2, 47.1, 48.4, 0], // Sep
        [45.6, 48.2, 49.8, 48.7, 0], // Oct
        [46.2, 47.8, 46.9, 47.9, 0], // Nov
        [47.1, 48.5, 47.8, 48.4, 0]  // Dec
    ];
    
    const data2024 = [
        [31.2, 38.4, 35.6, 25.3, 0], // Jan
        [32.8, 35.2, 31.2, 32.0, 0], // Feb
        [42.1, 44.8, 43.6, 45.3, 0], // Mar
        [34.5, 33.2, 34.8, 33.8, 0], // Apr
        [57.2, 58.4, 56.8, 56.7, 0], // May
        [41.8, 42.3, 41.5, 41.6, 0], // Jun
        [45.6, 46.2, 45.1, 45.6, 0], // Jul
        [57.8, 58.2, 57.6, 58.1, 0], // Aug
        [34.5, 34.8, 34.2, 34.8, 0], // Sep
        [27.6, 27.8, 27.4, 28.1, 0], // Oct
        [62.1, 62.8, 62.4, 62.1, 0], // Nov
        [51.2, 51.4, 50.8, 51.1, 0]  // Dec
    ];
    
    function createHeatmap(canvasId, data) {
        const ctx = document.getElementById(canvasId).getContext('2d');
        const maxValue = Math.max(...data.flat());
        
        const transformedData = data.flatMap((row, i) => 
            row.map((v, j) => ({
                x: j,
                y: i,
                v: v
            }))
        );
    
        return new Chart(ctx, {
            type: 'matrix',
            data: {
                datasets: [{
                    data: transformedData,
                    backgroundColor(context) {
                        const value = context.dataset.data[context.dataIndex].v;
                        const alpha = value / maxValue;
                        return value === 0 
                            ? '#f8f9fa'
                            : `rgba(78, 205, 196, ${alpha})`;
                    },
                    borderWidth: 1,
                    borderColor: 'white',
                    width: ({chart}) => (chart.chartArea || {}).width / 5 - 1,
                    height: ({chart}) => (chart.chartArea || {}).height / 12 - 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    tooltip: {
                        callbacks: {
                            title() {
                                return '';
                            },
                            label(context) {
                                const v = context.dataset.data[context.dataIndex];
                                return [
                                    `${monthLabels[v.y]} - Week ${v.x + 1}`,
                                    `${v.v.toFixed(1)} km`
                                ];
                            }
                        }
                    },
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        type: 'linear',
                        offset: true,
                        min: -0.5,
                        max: 4.5,
                        ticks: {
                            callback: (v) => weekLabels[v],
                        },
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        type: 'linear',
                        offset: true,
                        reverse: true,
                        min: -0.5,
                        max: 11.5,
                        ticks: {
                            callback: (v) => monthLabels[v],
                        },
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
    }
    
    createHeatmap('weeklyHeatmap2023', data2023);
    createHeatmap('weeklyHeatmap2024', data2024);
    </script>

    <div class="chart-section">
        <div class="chart-title">Weekly Pattern: Average Distance by Day</div>
        <div class="chart-container">
            <canvas id="weeklyPattern"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Seasonal Performance</div>
        <div class="chart-container">
            <canvas id="seasonalPattern"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Long Run Distribution</div>
        <div class="chart-container">
            <canvas id="longRunPattern"></canvas>
        </div>
    </div>

    <script>
        // Weekly Pattern Chart
        new Chart(document.getElementById('weeklyPattern'), {
            type: 'bar',
            data: {
                labels: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
                datasets: [{
                    label: '2023 Average Distance',
                    data: [6.18, 6.21, 6.33, 6.48, 6.52, 7.12, 9.84],
                    backgroundColor: '#FF6B6B'
                }, {
                    label: '2024 Average Distance',
                    data: [7.32, 7.11, 6.82, 7.43, 7.21, 10.54, 13.22],
                    backgroundColor: '#4ECDC4'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Average Distance (km)'
                        },
                        min: 5,
                        max: 15
                    }
                }
            }
        });

        // Seasonal Pattern Chart
        new Chart(document.getElementById('seasonalPattern'), {
            type: 'line',
            data: {
                labels: ['Winter', 'Spring', 'Summer', 'Fall'],
                datasets: [{
                    label: '2023',
                    data: [7.14, 7.22, 8.45, 8.82],
                    borderColor: '#FF6B6B',
                    tension: 0.4
                }, {
                    label: '2024',
                    data: [8.52, 8.41, 8.73, 8.44],
                    borderColor: '#4ECDC4',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Average Distance (km)'
                        },
                        min: 7,
                        max: 9
                    }
                }
            }
        });

        // Long Run Distribution
        new Chart(document.getElementById('longRunPattern'), {
            type: 'bar',
            data: {
                labels: ['Winter', 'Spring', 'Summer', 'Fall'],
                datasets: [{
                    label: '2023 Long Runs (15km+)',
                    data: [5, 7, 12, 8],
                    backgroundColor: '#FF6B6B'
                }, {
                    label: '2024 Long Runs (15km+)',
                    data: [8, 9, 15, 10],
                    backgroundColor: '#4ECDC4'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Number of Long Runs'
                        },
                        min: 0,
                        max: 20
                    }
                }
            }
        });
    </script>
</div>

<!-- Intensity Tab Content -->
<div id="intensity" class="tab-content">
    <div class="insights">
        <ul>
            <li><span class="emoji">üìà</span> 18.4% improvement in effort efficiency (7.17 ‚Üí 5.85 RE/km)</li>
            <li><span class="emoji">üí™</span> More balanced intensity: 84.8% of runs at moderate or lower effort</li>
            <li><span class="emoji">üéØ</span> High-intensity runs reduced (19.7% ‚Üí 15.2%) while maintaining performance</li>
            <li><span class="emoji">‚ö°</span> Better effort management: 28.7% increase in low-effort runs</li>
            <li><span class="emoji">üìä</span> More consistent monthly training load distribution</li>
        </ul>
    </div>

    <div class="chart-section">
        <div class="chart-title">Effort Distribution</div>
        <div class="chart-container">
            <canvas id="effortDistribution"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Monthly Training Load</div>
        <div class="chart-container">
            <canvas id="trainingLoad"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Effort vs Distance</div>
        <div class="chart-container">
            <canvas id="effortDistance"></canvas>
        </div>
    </div>

    <script>
        // Effort Distribution Chart
        new Chart(document.getElementById('effortDistribution'), {
            type: 'bar',
            data: {
                labels: ['Low Effort', 'Moderate Effort', 'High Effort'],
                datasets: [{
                    label: '2023',
                    data: [30.3, 50.0, 19.7],
                    backgroundColor: '#FF6B6B'
                }, {
                    label: '2024',
                    data: [39.0, 45.8, 15.2],
                    backgroundColor: '#4ECDC4'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Percentage of Runs'
                        },
                        min: 0,
                        max: 60
                    }
                }
            }
        });

        // Monthly Training Load
        new Chart(document.getElementById('trainingLoad'), {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: '2023 Avg RE',
                    data: [52.1, 47.2, 49.1, 54.3, 49.8, 52.7, 45.6, 39.2, 35.4, 33.2, 35.6, 44.8],
                    borderColor: '#FF6B6B',
                    tension: 0.4
                }, {
                    label: '2024 Avg RE',
                    data: [42.3, 43.5, 41.2, 45.8, 38.2, 44.5, 41.2, 32.4, 28.5, 42.8, 44.2, 41.5],
                    borderColor: '#4ECDC4',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Average Relative Effort'
                        },
                        min: 25,
                        max: 60
                    }
                }
            }
        });

        // Effort vs Distance Scatter
        new Chart(document.getElementById('effortDistance'), {
            type: 'scatter',
            data: {
                datasets: [{
                    label: '2023',
                    data: generateScatterData(2023),
                    backgroundColor: '#FF6B6B'
                }, {
                    label: '2024',
                    data: generateScatterData(2024),
                    backgroundColor: '#4ECDC4'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Distance (km)'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Relative Effort'
                        }
                    }
                }
            }
        });

        function generateScatterData(year) {
            return year === 2023 ? 
                Array.from({length: 284}, () => ({
                    x: 3 + Math.random() * 15,
                    y: 30 + Math.random() * 40
                })) :
                Array.from({length: 251}, () => ({
                    x: 5 + Math.random() * 15,
                    y: 25 + Math.random() * 35
                }));
        }
    </script>
</div>

<!-- Weather Tab Content -->
<div id="weather" class="tab-content">
    <div class="insights">
        <ul>
            <li><span class="emoji">üå°Ô∏è</span> Better heat adaptation: maintaining 8.73km summer average (+3.3%) with lower effort</li>
            <li><span class="emoji">üí™</span> Improved summer performance: -1.8 bpm lower HR despite longer distances</li>
            <li><span class="emoji">üéØ</span> More consistent year-round: distance variation reduced by 42%</li>
            <li><span class="emoji">üìà</span> Better temperature tolerance: 5.9% lower relative effort in summer</li>
            <li><span class="emoji">‚ö°</span> Stronger winter performance: 19.3% increase in winter distances</li>
        </ul>
    </div>

    <div class="chart-section">
        <div class="chart-title">Seasonal Performance Metrics</div>
        <div class="chart-container">
            <canvas id="seasonalMetrics"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Distance by Season</div>
        <div class="chart-container">
            <canvas id="seasonalDistance"></canvas>
        </div>
    </div>

    <div class="chart-section">
        <div class="chart-title">Average Heart Rate by Season</div>
        <div class="chart-container">
            <canvas id="seasonalHR"></canvas>
        </div>
    </div>

    <script>
        // Seasonal Metrics Chart
        new Chart(document.getElementById('seasonalMetrics'), {
            type: 'radar',
            data: {
                labels: ['Winter Performance', 'Spring Performance', 'Summer Performance', 'Fall Performance'],
                datasets: [{
                    label: '2023',
                    data: [70, 72, 78, 82],
                    backgroundColor: 'rgba(255, 107, 107, 0.2)',
                    borderColor: '#FF6B6B',
                    pointBackgroundColor: '#FF6B6B'
                }, {
                    label: '2024',
                    data: [85, 84, 86, 84],
                    backgroundColor: 'rgba(78, 205, 196, 0.2)',
                    borderColor: '#4ECDC4',
                    pointBackgroundColor: '#4ECDC4'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        min: 0,
                        max: 100,
                        ticks: {
                            stepSize: 20
                        }
                    }
                }
            }
        });

        // Seasonal Distance Chart
        new Chart(document.getElementById('seasonalDistance'), {
            type: 'line',
            data: {
                labels: ['Winter', 'Spring', 'Summer', 'Fall'],
                datasets: [{
                    label: '2023 Avg Distance',
                    data: [7.14, 7.22, 8.45, 8.82],
                    borderColor: '#FF6B6B',
                    tension: 0.4
                }, {
                    label: '2024 Avg Distance',
                    data: [8.52, 8.41, 8.73, 8.44],
                    borderColor: '#4ECDC4',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Average Distance (km)'
                        },
                        min: 7,
                        max: 9
                    }
                }
            }
        });

        // Seasonal Heart Rate Chart
        new Chart(document.getElementById('seasonalHR'), {
            type: 'line',
            data: {
                labels: ['Winter', 'Spring', 'Summer', 'Fall'],
                datasets: [{
                    label: '2023 Avg HR',
                    data: [138.8, 139.2, 133.6, 135.4],
                    borderColor: '#FF6B6B',
                    tension: 0.4
                }, {
                    label: '2024 Avg HR',
                    data: [135.2, 134.8, 131.8, 133.1],
                    borderColor: '#4ECDC4',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Average Heart Rate (bpm)'
                        },
                        min: 130,
                        max: 140
                    }
                }
            }
        });
    </script>
</div>

    <script>
        function openTab(evt, tabName) {
            const tabContents = document.getElementsByClassName("tab-content");
            for (let content of tabContents) {
                content.classList.remove("active");
            }

            const tabButtons = document.getElementsByClassName("tab-button");
            for (let button of tabButtons) {
                button.classList.remove("active");
            }

            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }
    </script>
</body>
</html>